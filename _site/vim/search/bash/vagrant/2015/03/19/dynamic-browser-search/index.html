<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Dynamic browser search from a yanked text in VIM from a vagrant box</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="everyday I learn something new and it is important to share this new acquired knowledge with my peers. For that reason I built this magic castle to keep everything I learn.
">
        <link rel="canonical"
        href="http://in-todays-story.com/vim/search/bash/vagrant/2015/03/19/dynamic-browser-search/">

        <!-- Harmony styles -->
        <link rel="stylesheet" type="text/css" href="/assets/css/main.css">

        <!-- Modernizr js -->
        <script async src="/assets/js/modernizr.js"></script>

        <!-- IE Fixes -->
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body class="theme-base-01">
        <header class="main-header">
            <div class="wc-container">
                <h1><a href="/">In Todays Story</a></h1>
                <h5 style="text-align: center">by Fellipe Brito about Ruby, Clojure, VIM and an Engineer's life</h5>
                <ul>
  <li>
    <a href="http://in-todays-story.com/about">About</a><span>/</span>
  </li>
  <li>
    <a href="http://in-todays-story.com/blog">Blog</a><span>/</span>
  </li>
</ul>

            </div>
        </header>
        <div class="page-content wc-container">

  <div class="post">
    <h1>Dynamic browser search from a yanked text in VIM from a vagrant box</h1>
    <p class="post-meta">
      
      <span class="categories">
      vim, search, bash, and vagrant
      </span> |
      
      <span class="post-date">
      Mar 19, 2015
      </span>
    </p>
    <div class="post">
      <p><em>by <a href="https://github.com/fellipebrito">@fellipebrito</a></em></p>

<p><em>“Me and Ms. Mouse… we have a thing”</em> - I hate to use the mouse. Not only because I want to show off my abilities with the keyboard everytime a new fellow developer comes over my desk but mainly because it slows me down. I’ve invested some time in the last two years to get my hands as far as away from the mouse as possible. Even more than slow me down, the movement from keyboard to mouse and back to the keyboard can be harmful to your wrists, but it is another story.</p>

<p>I like to use the term “I’m in the matrix” when I’m coding. Because this is how I feel, and also because everyone else understands I’m with my terminal in full-screen mode and notifications turned off. The problem is that “write code” is not the main task of a developers’ life. We do not like to admit, but we spend a lot of time looking for an answer to dumb questions and reading through APIs that we’ve already read before but we just did not memorize it. This is another thing that bothers me: _<open terminal=""> <tmux> <vim> <start coding=""> <how do="" i="" do...="" question=""> &lt;alt + tab&gt; <chrome> &lt;google/github/stackoverflow&gt; &lt;ctrl + v&gt; <get answers="">_ and the idea that I do that at least 20 times each day.</get></chrome></how></start></vim></tmux></open></p>

<p>There are so many steps - mouse interactions and keystrokes - in the whole process I described above that if I only try to make a simple math ( ( keystrokes + mouse clicks ) * 20 ) I will start to get mad at me! It is A LOT of time lost, and as once Bruce Lee said:
&gt;<em>“If you love life, don’t waste time, for time is what life is made up of.”</em></p>

<h3 id="what-bothers-memarkdown">what-bothers-me.markdown</h3>

<p>I’ve seen some folks that have this practice of creating a simple markdown file somewhere so they can keep a track of everything that bothers them but is not a “must to be fixed now” thing. I like this practice, so I have an alias on my VIM that opens this file for me with two keystrokes. It was in this file that I saved the quote <em>“I hate to use the mouse to copy text from vim and then alt-tab to Chrome every time I want to look for something”</em>. It was there, saved as a small thorn in my finger. Every time I went through this process I felt the pain. Two days ago I watched 25% of a youtube video where the developer had an idea for his emacs. So before I finish watching, I thought: “Ok, I will try to fix this issue myself, and later on I come back to see how he did it”. So here we go.</p>

<h3 id="tldr---ok-code-starts-here">tl;dr?! - Ok, code starts here…</h3>

<h4 id="expect">Expect</h4>
<p>First of all, you must have expect installed in your unix. <em>“OH, come on, you do not know what is expect?”</em>. Dude, go for it here: <a href="http://www.admin-magazine.com/Articles/Automating-with-Expect-Scripts">Using Expect Scripts to Automate Tasks</a></p>

<h4 id="automate-ssh-access-to-your-computer-from-vagrant">Automate SSH access to your computer from vagrant</h4>
<p>My personal computer is dumb. It does not have GitHub keys, Ruby, MySQL or any other “dev stuff”. The only tool this computer has is a vagrant box (or some boxes). There, inside my vagrant is where I’m happy. The problem is that this vagrant box does not have access to my browser, file preview and other apps that I use.</p>

<p>My plan was simple: I’d like to <strong>yank a text on vim, execute few keystrokes and then an automated script would open my browser and search for this text in google</strong>.</p>

<p>If you want to have an executable file, you should start it with a header that gives it some information about how it should be executed.</p>

<p>```bash
#!/usr/bin/expect -f
# Use: browser_search.sh <query-to-be-searched></query-to-be-searched></p>

<p>set QUERY [lindex $argv 0]
```</p>

<p>Now that I have the query I want to search as my argument, and matrix know it should use expect -f, it is time to ssh back into my main computer:
<code>bash
spawn ssh username@hostname
expect "Password: "
send "your-password\r"
expect "$ "
</code></p>

<p>Look how amazing <em>expect</em> is!</p>

<p>Ok, now that I’m on my main computer (a MacOS) it is a matter of open my default browser and access Google:
<code>bash
send "open https://www.google.com/#q=${QUERY}\r"
expect "$ "
send "exit\r"
</code></p>

<p>The whole script is on this <a href="https://gist.github.com/fellipebrito/e35f976c3d952d6f4714">gist</a></p>

<p>You can copy/download/modify it and then move into your /bin/<file_name>.sh directory. Do not forget to give it 755 permission so it looks like that:
```bash
-rwxr-xr-x 1 root 259 Mar 18 19:21 /bin/browser_search.sh*
```</file_name></p>

<h4 id="vim-alias---how-to-copy-yanked-lines-in-vims-command-line">Vim alias - how to copy yanked lines in VIM’s command line</h4>

<p>Now that I have this script I have one more challenge, I want to yank a text and with two or three keystrokes send it to the terminal?</p>

<p><code>
map &lt;Leader&gt;bs :!browser_search.sh &lt;C-r&gt;"&lt;CR&gt;
</code></p>

<p>Here the <code>map &lt;Leader&gt;bs </code> is defining my keystroke.</p>

<p><code>:!browser_search.sh </code> tells VIM that it should execute this command on the command line.</p>

<p><code>&lt;C-r&gt;"</code> is the command to paste the text is yanked on the command line. And finally the <code>&lt;CR&gt;</code> is the <enter> key.</enter></p>

<p>It works very well, and my plan in the future is to improve it so I can search not only on Google but define if I want to search directly in one specific place.</p>

<p><a href="http://gifyu.com/images/dynamic-browser-search.gif"><img src="http://gifyu.com/images/dynamic-browser-search.gif" alt="ScreenShot" /></a></p>

    </div>
  </div>


  
  <div class="related">
    <h4>Related Posts</h2>
    <ul class="posts">
        
        <li>
        <span>11 Mar 2015 &raquo;</span>
        <a href="http://in-todays-story.com/vim/2015/03/11/resizing-splits/">Resizing splits</a>
        </li>
        
        <li>
        <span>11 Mar 2015 &raquo;</span>
        <a href="http://in-todays-story.com/shell/clojure/2015/03/11/lein-ring-server-running-in-the-background/">Lein Ring Server running in the background</a>
        </li>
        
        <li>
        <span>10 Mar 2015 &raquo;</span>
        <a href="http://in-todays-story.com/javascript/sinatra/ruby/clojure/ring/ajax/2015/03/10/cross-origin-resource-sharing/">Cross Origin Resource Sharing in Sinatra (ruby) and Ring (clojure) - CORS</a>
        </li>
        
    </ul>
  </div>
  

  <div class="post-footer">
    <div class="column-1">
      
        <a href="http://in-todays-story.com/vim/2015/03/11/resizing-splits/"><< Older</a>
      
    </div>
    <div class="column-2"><a href="http://in-todays-story.com/ ">Home</a></div>
    <div class="column-3">
      
        <span>Newer >></span>
      
    </div>
  </div>
</div>

        <footer class="main-footer">
            <div class="wc-container">
                <div class="column one">
                    <h6>Few more links</h6>
<ul class="menu">
    <li><a href="http://in-todays-story.com/about">About</a></li>
    <li><a href="http://in-todays-story.com/blog">Blog</a></li>
    <li><a href="http://in-todays-story.com/faq">Help / FAQ</a></li>    
</ul>		
                </div>
                <div class="column two">
                    <h6>Follow me</h6>

<ul class="social-media">


    
    <li>
        <a title="fellipeeduardo on Twitter"
            href="https://twitter.com/fellipeeduardo"
            class="twitter wc-img-replace" target="_blank">Twitter</a>
    </li>
    

    
    <li>
        <a title="fellipebrito on Github"
            href="https://github.com/fellipebrito"
            class="github wc-img-replace" target="_blank">Github</a>
    </li>
    

    

    
</ul>

                </div>
            </div>
            <p class="wc-container disclaimer">
                
	Made by <a href="http://fellipebrito.com" target="_blank">Fellipe Brito</a>

Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>

            </p>
        </footer>
        <script type="text/javascript">
          /* To avoid render blocking css */
          var cb = function() {
            var l = document.createElement('link'); l.rel = 'stylesheet';
            l.href = 'http://fonts.googleapis.com/css?family=Ubuntu+Mono&subset=latin';
            var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h);
          };
          var raf = requestAnimationFrame || mozRequestAnimationFrame ||
              webkitRequestAnimationFrame || msRequestAnimationFrame;
          if (raf) raf(cb);
          else window.addEventListener('load', cb);
        </script>
        <!-- jQuery -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- When no internet load JQuery from local -->
        <script>window.jQuery || document.write('<script src="/assets/js/jquery.min.js"><\/script>')</script>
        <!-- Site js -->
        <script src="/assets/js/all.js"></script>
        <!-- Google analytics  -->
        
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

    </body>
</html>
